webpackJsonp([54],{1699:function(e,t,n){e.exports={controllerViews:{AdPrefetch:n(2165),ComboAd:n(2166),DockedAds:n(2537),Ad:n(663)},stores:{AdStore:n(52)}}},2165:function(e,t,n){"use strict";var i=n(3)("DARLA:AdPrefetch");e.exports=n(4)({displayName:"AdPrefetch",mixins:[n(23)],statics:{initializeAction:n(713)},render:function(){var e=this.props.context,t=this.getStore(n(52));if(n(413)(e,t))return i("darla is disabled by query parameter"),null;var s="",r=e&&e.session&&e.session.isLightWeightBrowser,o=e&&e.session&&e.session.protocol||"https",a=n(2)(e,["session","dimensions","bucket"],""),d=n(2)(e,["session","dimensions","lang"],"en-US"),p=t.getDarlaConfig(),c=this.getStore("PageStore"),f=c.getCurrentRenderTargetId(),l=t.getAdFetchEvent();if(!l)return null;var w=n(2)(p,["events","adFetch","firstRender"],""),h=p.deferRenderDelay||3e3,m=l.site||n(2)(e,["session","dimensions","site"],""),u=m&&d?m+"_"+d:m,v=p.spaceid||c&&c.getSpaceid();l&&l.spaceid&&(v=l.spaceid);var A=t.isReactjsDisabled(),g=void 0===p.crossdomain||p.crossDomain,_=p.aboveFoldPositions||"MAST,LDRB,SPRZ,SPL,LREC,MON-1,MAST-9,LDRB-9,LREC-9";if(p.aboveFoldPositions&&delete p.aboveFoldPositions,o=t.shouldForceSsl()?"https":o,_=_.split(","),t.isDarlaJsAtTop()){var D=t.getDarlaBaseConfig()||t.getDarlaConfigHard(o);n(26)(p,D)}p.lang=d,p.events||(p.events={}),p.events.adFetch=l,p.events.adFetch.ssl=1,p.events.adFetch.secure=1,p.events.DEFAULT||(p.events.DEFAULT={}),p.events.DEFAULT.sp=v,p.events.TD_AUTO||(p.events.TD_AUTO={ps:Object.keys(p.positions).join(",")}),Object.keys(p.positions).forEach(function(e){var t=p.positions[e];t.dest=f+"dest"+e,t.clean=f+"clean"+e}),p.events.AUTO&&!p.events.AUTO.sa&&(s=t.getSiteAttrs())&&(p.events.AUTO.sa=s),p.auto_render=!!r||t.isAutoAdRender();for(var R in p.events)p.events.hasOwnProperty(R)&&("https"!==o||p.events[R].ssl||(p.events[R].ssl=1,p.events[R].secure=1),(u||a)&&(p.events[R].ult||(p.events[R].ult={}),p.events[R].ult.pg={property:u,test:a}));var E,y=t.getDarlaDataIsland(),N="";y||(N="window._DarlaBootNeeded = true;"),g?(E='window.DARLA_CONFIG.servicePath = window.location.protocol + "//fc.yahoo.com/sdarla/php/fc.php";',E+="window.DARLA_CONFIG.dm = 1;"):E='window.DARLA_CONFIG.servicePath = window.location.protocol + "//" + window.location.host + "/sdarla/php/fc.php";';var T=n(2)(e,["session","isYnet"],""),L=n(2)(e,["session","query","_mockads"],"");T&&L&&(E='window.DARLA_CONFIG.servicePath = window.location.protocol + "//" + window.location.host + "/sdarla/php/fc.php";');var S="window._DarlaPrefetchResponse = response;",I="";if(r){var P=p.darlaDelay||10;s=l.sa||e.getStore("AdStore").getSiteAttrs();var C=["LREC"];if(l&&l.ps){var x={ps:l.ps,sp:v,sa:s};C=l.ps.split(",").filter(function(e){return"LREC"===e.split("-")[0]}),S='setTimeout(function() {if (DARLA.prefetched()) {DARLA.render();}else {DARLA.event("adFetch", '+JSON.stringify(x)+");}}, "+P+");"}else S="";I='(function() {var handleBackfill = function(ev) {if (ev.data) {var c2Event;try {c2Event = typeof ev.data === "string" ? JSON.parse(ev.data) || null : ev.data;} catch (e) {}if (c2Event && c2Event.msg) {if ((c2Event.msg === "rmx:no-ad" || c2Event.msg === "sidekicktv:no-ad") &&c2Event.ad !== "") {var lrecPositions = '+JSON.stringify(C)+';for (var i in lrecPositions) {if (lrecPositions.hasOwnProperty(i)) {var adDiv = document.getElementById("'+f+'" + lrecPositions[i] + "-sizer");if (adDiv) {adDiv.style.display = "none";}}}}}}};if (window.attachEvent) {window.attachEvent("onmessage", handleBackfill);} else if (window.addEventListener) {window.addEventListener("message", handleBackfill);}})();'}var F=n(2)(p,["positions","MAST","maxWidth"],970),M=n(2)(p,["positions","MAST","maxHeight"],600),k="",O="";t.shouldKeepPerfEntries()||(k="window.performance.clearMarks(item.name);",O="window.performance.clearMeasures(item.name);");var b,B='<script type="text/javascript">window._loadEvt = false; \nwindow._adPerfData = []; \nwindow._adPosMsg = []; \nwindow._perfMark = function _perfMark (name) {if (window.performance && window.performance.mark){try {if (window.performance.getEntriesByName("NAVIGATE_START") && window.performance.getEntriesByName("NAVIGATE_START")[0]) { name = "CL_" + name ;}window.performance.mark(name);} catch (e) {console.warn(name + \' could not be marked:\',e);}};};\nwindow._perfMeasure = function _perfMeasure (name, start, end) {if (window.performance && window.performance.measure){try {if (window.performance.getEntriesByName("NAVIGATE_START") && window.performance.getEntriesByName("NAVIGATE_START")[0]) { start = "CL_" + start ;end = "CL_" + end ;name = "CL_" + name ;}window.performance.measure(name, start, end);} catch (e) {console.warn(name + \' could not be added:\',e);}};};\nwindow._pushAdPerfMetric = function _pushAdPerfMetric(key) {if (window.performance && window.performance.now) {_adPerfData.push([key, Math.round(window.performance.now())]);}};\nwindow._fireAdPerfBeacon = function _fireAdPerfBeacon(eventName) {try {if (window && window.rapidInstance && window.performance) {var navClickMark = window.performance.getEntriesByName(\'NAVIGATE_START\') &&window.performance.getEntriesByName(\'NAVIGATE_START\').pop();var navClickTime = navClickMark && navClickMark.startTime || 0;var userTime = {};window.performance.getEntries().forEach(function forEachPerfTime (item) {if (item.name.search(\'DARLA_\') > -1) {if (item.entryType === "mark") {userTime[item.name] = Math.round(item.startTime) - navClickTime;'+k+'} else if (item.entryType === "measure") {userTime[item.name] = Math.round(item.duration);'+O+"}}});var perfData = {perf_usertime: {utm: userTime}};\nwindow.rapidInstance.beaconPerformanceData(perfData);}} catch (e) {console.warn('Could not send the beacon:',e);}};\nwindow.DARLA_CONFIG = "+JSON.stringify(p)+"\n"+E+"window.DARLA_CONFIG.onStartRequest = function() {window._perfMark('DARLA_REQSTART');};\nwindow.DARLA_CONFIG.onFinishRequest = function() {window._perfMark('DARLA_REQEND');};\nwindow.DARLA_CONFIG.onStartParse = function() {window._perfMark('DARLA_PSTART');};\nwindow.DARLA_CONFIG.onSuccess = function(eventName) {if (eventName === 'AUTO') {return;}if (window._DarlaEvents) {window._DarlaEvents.emit(\"success\", {eventName: eventName});}window._perfMark('DARLA_DONE_' + eventName);window._darlaSuccessEvt = eventName;if (window._loadEvt) {window._fireAdPerfBeacon(eventName);}};\nwindow.DARLA_CONFIG.onStartPosRender = function(posItem) {var posId = posItem && posItem.pos;window._perfMark('DARLA_ADSTART_' + posId);if (window._pushAdPerfMetric) {window._pushAdPerfMetric(\"DARLA_ADSTART_\" + posId);}};\nwindow.DARLA_CONFIG.onFinishPosRender = function(posId, reqList, posItem) {var ltime;window._perfMark('DARLA_ADEND_' + posId);window._perfMeasure('DARLA_RENDERTIME_' + posId, 'DARLA_ADSTART_'+posId, 'DARLA_ADEND_'+posId);if(window._DarlaEvents) {window._DarlaEvents.emit(\"finishrender\", {pos:posId, list:reqList, item:posItem});}var aboveFoldPositions = "+JSON.stringify(_)+';if (window._pushAdPerfMetric) {if (window.performance && window.performance.now) {ltime = window.performance.now();}window._pushAdPerfMetric("ADEND_"+posId);var adModDiv = posItem.conf.dest.replace("dest", "") + "-sizer";setTimeout(function () {if (window.performance && window.YAFT !== undefined &&window.YAFT.isInitialized() && -1 !== aboveFoldPositions.indexOf(posId)) {window.YAFT.triggerCustomTiming(adModDiv, "", ltime);}}, 300);}};\nwindow.DARLA_CONFIG.onBeforePosMsg = function(msg, posId) {var maxWidth = '+F+", maxHeight = "+M+';var newWidth, newHeight, pos;if ("MAST" !== posId) {return;}if (msg === "resize-to") {newWidth = arguments[2];newHeight = arguments[3];} else if (msg === "exp-push" || msg === "exp-ovr") {pos = $sf.host.get("MAST");newWidth = pos.conf.w + arguments[6] + arguments[7];newHeight = pos.conf.h + arguments[5] + arguments[8];}if (newWidth > maxWidth || newHeight > maxHeight) {return true;}};\nwindow.DARLA_CONFIG.onFinishParse = function(eventName, response) {try {window._perfMark(\'DARLA_PEND\');if (eventName === "prefetch") {'+S+'}if (window._DarlaEvents) {window._DarlaEvents.emit("finishparse", {response: response,eventName: eventName});}} catch (e) {console.error(e);throw e;}\n};\nwindow.DARLA_CONFIG.onStartPrefetchRequest = function(eventName) {window._perfMark(\'DARLA_PFSTART\');};\nwindow.DARLA_CONFIG.onFinishPrefetchRequest = function(eventName, status) {window._perfMark(\'DARLA_PFEND\');try {window._DarlaEvents.emit(\'finishprefetch\', {status: status,eventName: eventName});} catch (e) {console.error(e);throw e;}\n};\nwindow.DARLA_CONFIG.onPosMsg = function(cmd, pos, msg) {try {if (window._DarlaEvents && cmd === "cmsg") {var posmsg = {pos: pos,msg: msg};window._DarlaEvents.emit("splashmsg", posmsg);if (window._adPosMsg) {window._adPosMsg[window._adPosMsg.length] = posmsg;}}if (window._DarlaEvents && (cmd === "ui-fclose-show" || cmd === "ui-fclose-close")) {setTimeout(function _emitAdResize(){window._DarlaEvents.emit("adresize", {pos: pos})}, 0);}} catch (e) {console.error(e);throw e;}\n};\n(function () {var _onloadEvt = function _onloadEvtHandler() {window._loadEvt = true;if (window._darlaSuccessEvt) {window._fireAdPerfBeacon(window._darlaSuccessEvt);}};if (window.addEventListener) {window.addEventListener("load", _onloadEvt);} else if (window.attachEvent) {window.attachEvent("onload", _onloadEvt);}function _onDarlaError (type) {return function _darlaErrHandler(evName) {try {if (window._DarlaEvents) {window._DarlaEvents.emit("darlaerror" + evName);window._DarlaEvents.emit("darlaerror", {type: type,eventName: evName,error: true});}} catch (e) {console.error(e);throw e;}};};window.DARLA_CONFIG.onRequestTimeout = _onDarlaError("requestTimeout");window.DARLA_CONFIG.onRenderTimeout = _onDarlaError("renderTimeout");window.DARLA_CONFIG.onFailure = _onDarlaError("failure");window.DARLA_CONFIG.onIdle = function onDarlaIdle () {    try {        window._DarlaEvents && window._DarlaEvents.emit("onIdle");    } catch (e) {        console.error(e);        throw e;    }};})();\n'+N+"window.$sf = window.sf = {};\nwindow.$sf.host = {onReady: function (autorender, deferrender, firstRenderPos, deferRenderDelay) {window._perfMark('DARLA_ONREADY');window._perfMeasure('DARLA_ONREADY');window.sfready = true;if (window._DarlaEvents && !autorender) {window._DarlaEvents.emit(\"darlaboot\");} else if (autorender){window._perfMark('DARLA_RSTART');if (typeof DARLA !== \"undefined\" && DARLA) {if (deferrender && firstRenderPos) {var firstBatchPos = [];var prefetchedPos = DARLA.prefetched();if (prefetchedPos.length <= 0) {return;}var firstRender = firstRenderPos.split(',');if (firstRender && firstRender.length > 0) {for (var i = 0; i < firstRender.length; i++) {var position = firstRender[i];var index = prefetchedPos.indexOf(position);if (index >= 0) {firstBatchPos = firstBatchPos.concat(prefetchedPos.splice(index, 1));}};}if (firstBatchPos.length > 0) {var renderWithRetry = function(pos) {if (DARLA.inProgress()) {var waittime = 600, maxwait = 100, deferRetry = 0, interval;interval = setInterval(function() {deferRetry ++;if (!DARLA.inProgress()){clearInterval(interval);DARLA.render(pos);}if (deferRetry > maxwait){clearInterval(interval);}}, waittime);} else {DARLA.render(pos);}};renderWithRetry(firstBatchPos);setTimeout(renderWithRetry, deferRenderDelay, prefetchedPos);} else {DARLA.render();}} else {"+(!A||y?"DARLA.render();":'DARLA.event("adFetch");')+"}}}}\n};\nwindow.sf_host = window.$sf.host;\ndocument.onreadystatechange = function () {if (document.readyState == \"interactive\") {window._perfMark('DOM_INTERACTIVE');}};"+I+"<\/script>\n",G=B;return(y||A)&&(G+=y||"",t.isDarlaJsAtTop()&&(b=t.isDelayedRender()?'document.addEventListener("DOMContentLoaded", function(event) {window.sf_host.onReady('+t.isAutoAdRender()+","+t.isDeferRender()+",'"+w+"',"+h+");});":"window.sf_host.onReady("+t.isAutoAdRender()+","+t.isDeferRender()+",'"+w+"',"+h+");",G+='<script type="text/javascript">if (typeof DARLA !== "undefined" && DARLA) {DARLA.config(window.DARLA_CONFIG);'+b+"}<\/script>\n")),n(1).createElement("div",{dangerouslySetInnerHTML:{__html:G}})}})},2166:function(e,t,n){"use strict";var i=n(90).Composite;e.exports=n(4)({displayName:"ComboAd",mixins:[n(23)],propTypes:{style:n(0).object,adparseStyle:n(0).object,finishedStyle:n(0).object,children:n(0).array.isRequired},statics:{storeListeners:[n(52)]},getInitialState:function(e){return e=e||this.props,{style:e.style,height:e.style&&e.style.height}},onChange:function(e){if(!this.props.disableNuke&&("newpage"===e.type||e.newpage)){this.setState({style:this.props.style});var t=this;setImmediate(function(){t.props.children.forEach(function(e){n(31).nukePosition(e.props.pos)})})}},componentDidMount:function(){"undefined"!=typeof window&&window._DarlaEvents&&(window._DarlaEvents.on("finishrender",this.onFinishRender),window._DarlaEvents.on("finishparse",this.onFinishParse),window._DarlaPrefetchResponse&&this.onFinishParse({response:window._DarlaPrefetchResponse}))},componentWillUnmount:function(){"undefined"!=typeof window&&window._DarlaEvents&&(window._DarlaEvents.removeListener("finishrender",this.onFinishRender),window._DarlaEvents.removeListener("finishparse",this.onFinishParse))},onFinishRender:function(e){var t=this;e&&this.props.children.forEach(function(i){if(e.pos===i.props.pos){var s=e.item,r=s&&s.meta&&s.meta.value&&s.meta.value("size","y")||null,o=!s||s.hasErr||"1x1"===r,a=n(11)({},t.props.finishedStyle);t.setState(o?{style:{},height:null}:{style:a}),t.executeAction(function(e){e.dispatch("HEIGHT_CONTAINER_CHANGE",{type:"task_complete"})})}})},onFinishParse:function(e){if(e&&e.response){var t=[];this.props.children.forEach(function(e){t.push(e.props.pos)});for(var i=e.response.ps(),s=!0,r=!1,o=this.getStore(n(52)),a=0;a<i.length;a++)if(t.indexOf(i[a])>=0){r=!0;var d=e.response.item(i[a]),p=d&&d.meta&&d.meta.value&&d.meta.value("size","y")||null,c=!d||d.hasErr||"1x1"===p,f=o.getPosConfig(i[a])||{},l=f.metaSize&&p&&p.split("x")[1]||f.h;if(!c&&l){var w=n(11)({},this.props.adparseStyle);this.setState({style:w,height:l+"px"}),s=!1}}r&&s&&this.setState({style:{},height:null})}},render:function(){var e=n(11)({},this.state.style);this.state.height&&(e.height=this.state.height);var t=this.props.children;t.forEach(function(e){e.props.id="cmb"+e.props.pos,e.props.key="cmb"+e.props.pos});var s=this.props.className||"";return this.getStore(n(52)).isDisableDarla()&&(s+=" D(n)"),n(1).createElement("div",{className:s,style:e},n(1).createElement(i,{components:t}))}})},2537:function(e,t,n){"use strict";var i=n(90).Composite;e.exports=n(4)({displayName:"DockedAds",mixins:[n(23)],propTypes:{className:n(0).string,children:n(0).array.isRequired,target:n(0).string,targetIndex:n(0).number,targetSelector:n(0).string},statics:{initializeAction:n(2538),storeListeners:[n(52)]},contextTypes:{renderTarget:n(0).object},getInitialState:function(e){return this.adStore=this.getStore(n(52)),this.routeStore=this.getStore("RouteStore"),{isFixed:!1,expanded:!1,isFetching:!1,childReady:this.adStore.getChildCompositeReady(this.props.id),childCount:this.props.children.length,right:0,offset:0}},getChildPositions:function(){var e=[];return this.props.children.forEach(function(t){"td-ads"===t.bundleName&&e.push(t.props.pos)}),e},commentExpand:function(e){var t=this,i=e.offsetHeight>250,s=!1,r=this.props.children.length;if(t.state.expanded!==i){var o=t.getChildPositions();e.offsetHeight<650&&(o.splice(1),r=1),e.offsetHeight>250?(s=!0,i&&setImmediate(function(){context.executeAction(n(265),{positions:o}),t._repositionAd(null,!0)})):i=!1}t.setState({expanded:i,isFetching:s,childCount:r})},onChange:function(e){var t=this,i=this.routeStore,s=i.getCurrentNavigate()||{},r=n(2)(s,["params","collapseContent"],!1),o=null;if("childCompositeReady"===e.type&&this.props.id===e.instanceId&&this.setState({childReady:!0}),this.state.expanded&&"task_complete"===e.type&&this.setState({isFetching:!1}),this.props.target){var a=document.getElementsByClassName(this.props.target);a&&a.length>this.props.targetIndex&&(o=a[this.props.targetIndex])}else if(this.props.targetSelector){var d=this.context.renderTarget;o=document.querySelector("#"+d.elementId+" "+this.props.targetSelector)}o&&(r||"comments_expand"!==e.type?("newpage"===e.type||e.newpage)&&(setImmediate(function(){t.props.children.forEach(function(e){"td-ads"===e.bundleName&&n(31).nukePosition(e.props.pos)})}),this.setState({expanded:!1})):setImmediate(function(){t.commentExpand(o)}))},componentDidMount:function(){n(53)("scroll",this._repositionAd,this)},componentWillUnmount:function(){n(281)("scroll",this._repositionAd)},_repositionAd:function(e,t){var i=this.props.targetIndex,s=n(16).findDOMNode(this.refs["adWrapper"+i]),r=n(16).findDOMNode(this.refs["adInnerWrapper"+i]),o=null;if(this.props.target){var a=document.getElementsByClassName(this.props.target);a&&a.length>i&&(o=a[i])}else if(this.props.targetSelector){var d=this.context.renderTarget;o=document.querySelector("#"+d.elementId+" "+this.props.targetSelector)}if(s&&r&&o){var p=r.offsetHeight,c=0;if(p>100||t){var f=o.getBoundingClientRect(),l=s.getBoundingClientRect(),w=!1,h=document.documentElement.clientWidth||window.innerWidth;if(f.top<88?f.bottom>=p+88?l.top<88&&(w=!0):c=f.height-p-(l.top-f.top):l.top<88?f.top>l.top?c=f.top-l.top:w=!0:f.top>l.top&&(c=f.top-l.top),w){this.setState({isFixed:!0,right:h-r.getBoundingClientRect().right})}else this.setState({isFixed:!1,offset:c})}}},render:function(){var e,t=this;if(t.state.childReady){e=(this.getStore("PageStore").getComposite(this.props.id)||{}).components}else e=this.props.children.map(function(e){if(t.state.childReady||"td-ads"===e.bundleName)return e;return{bundleName:"tdv2-applet-swisschamp",name:"Empty",props:{}}});e.splice(this.state.childCount);var s,r=this.props.targetIndex?this.props.targetIndex:0,o=[],a=[],d=0;for(s=0;s<e.length;s++)e[s].props=e[s].props||{},e[s].props.id=e[s].props.id||"dockedAds-"+s,e[s].props.key=e[s].props.key||"dockedAds-"+s;for(s=0;s<e.length&&"td-ads"===e[s].bundleName;s++){var p=this.adStore.getPosConfig(e[s].props.pos)||{};p&&p.h&&(d+=parseInt(p.h,10)),o.push(e[s])}o.length>0&&o.length<e.length&&(a=e.slice(o.length));var c=this.props.className;c?c+=" ad-inner-wrapper":c="ad-inner-wrapper";var f={};this.state.isFixed?f={position:"fixed",right:this.state.right+"px",top:"88px"}:0!==this.state.offset&&(f={transform:"translate3d(0px, "+this.state.offset+"px, 0px)"});var l="ad-wrapper",w={};return this.state.expanded||(l+=" D(n)"),(!this.state.expanded||this.state.isFetching)&&a.length>0&&(w.height=d+"px"),n(1).createElement("div",{className:l,ref:"adWrapper"+r},n(1).createElement("div",{className:this.props.className,style:f,ref:"adInnerWrapper"+r},n(1).createElement("div",{style:w},n(1).createElement(i,{components:o})),n(1).createElement(i,{components:a})))}})},2538:function(e,t,n){e.exports=function(e,t,i){var s=t.componentProps.id;s?e.executeAction(n(194),{parentComponent:{bundleName:"td-ads",name:"DockedAds"},name:s,components:t.componentProps.children},i):i&&i()}}});